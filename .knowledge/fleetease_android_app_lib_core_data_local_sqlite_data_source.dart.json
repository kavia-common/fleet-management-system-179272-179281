{"is_source_file": true, "format": "Dart", "description": "This file implements a local data source for a fleet management app using SQLite. It provides full CRUD operations for vehicles, groups, and events, manages database schema creation, migrations, seeding initial data, and handles database connection lifecycle. It conforms to the DataSource interface and emphasizes offline sync readiness with metadata fields like createdAt, updatedAt, isDeleted, and dirty.", "external_files": ["package:fleetease_android_app/core/data/data_source.dart", "package:fleetease_android_app/core/models/event.dart", "package:fleetease_android_app/core/models/group.dart", "package:fleetease_android_app/core/models/vehicle.dart", "package:sqflite/sqflite.dart"], "external_methods": ["getDatabasesPath", "openDatabase"], "published": ["LocalSqliteDataSource"], "classes": [{"name": "LocalSqliteDataSource", "description": "A class that manages persistent storage using SQLite, including schema creation, migrations, seeding, and CRUD operations for vehicles, groups, and events within the fleet management context."}], "methods": [{"name": "initialize", "description": "Sets up the SQLite database, runs creation/migration scripts, and optionally seeds initial data."}, {"name": "close", "description": "Closes the database connection, allowing reinitialization later."}, {"name": "compact", "description": "Performs a VACUUM operation to reclaim space in the database."}, {"name": "getVehicles", "description": "Fetches a list of all non-deleted vehicle records, ordered by last update."}, {"name": "createVehicle", "description": "Inserts a new vehicle record with metadata flags and returns the inserted vehicle."}, {"name": "updateVehicle", "description": "Updates an existing vehicle record and updates metadata accordingly."}, {"name": "deleteVehicle", "description": "Soft deletes a vehicle by setting its isDeleted flag."}, {"name": "getGroups", "description": "Retrieves all non-deleted business groups ordered by name."}, {"name": "createGroup", "description": "Creates a new business group with metadata flags."}, {"name": "updateGroup", "description": "Updates an existing business group record."}, {"name": "deleteGroup", "description": "Soft deletes a group and nullifies groupId references on vehicles."}, {"name": "getEvents", "description": "Retrieves all non-deleted events ordered by date or last update."}, {"name": "createEvent", "description": "Creates a new maintenance event with metadata flags."}, {"name": "updateEvent", "description": "Updates an existing maintenance event."}, {"name": "deleteEvent", "description": "Soft deletes an event."}, {"name": "_vehicleFromRow", "description": "Helper to map database row to Vehicle object."}, {"name": "_groupFromRow", "description": "Helper to map database row to BusinessGroup object."}, {"name": "_eventFromRow", "description": "Helper to map database row to MaintenanceEvent object."}], "calls": ["getDatabasesPath", "openDatabase", "Database.execute", "Database.query", "Database.insert", "Database.update", "Database.close"], "search-terms": ["LocalSqliteDataSource", "SQLite", "fleet management", "vehicles", "groups", "events", "migrations", "seeding", "offline sync", "metadata flags", "full CRUD"], "state": 2, "file_id": 49, "knowledge_revision": 519, "git_revision": "", "revision_history": [{"114": ""}, {"142": ""}, {"143": ""}, {"153": ""}, {"159": ""}, {"161": ""}, {"170": ""}, {"180": ""}, {"186": ""}, {"188": ""}, {"189": ""}, {"194": ""}, {"195": ""}, {"218": ""}, {"224": ""}, {"242": ""}, {"243": ""}, {"244": ""}, {"253": ""}, {"254": ""}, {"261": ""}, {"275": ""}, {"276": ""}, {"288": ""}, {"296": ""}, {"302": ""}, {"303": ""}, {"314": ""}, {"320": ""}, {"322": ""}, {"324": ""}, {"333": ""}, {"334": ""}, {"360": ""}, {"361": ""}, {"367": ""}, {"379": ""}, {"384": ""}, {"385": ""}, {"398": ""}, {"399": ""}, {"404": ""}, {"448": ""}, {"486": ""}, {"490": ""}, {"492": ""}, {"493": ""}, {"506": ""}, {"507": ""}, {"508": ""}, {"519": ""}], "hash": "4ba62ba3448f82f86e617c0f948e48ed", "format-version": 4, "code-base-name": "fleetease_android_app", "filename": "fleetease_android_app/lib/core/data/local_sqlite_data_source.dart"}